:root { --bg: #F7F1DE; --panel: #ffffff; --muted: #6b7280; --text: #111827; --accent: #A8BBA3; --border: #e5e7eb; }

/* Dark theme */
[data-theme="dark"] { --bg: #313338; --panel: #2B2D31; --muted: #B5BAC1; --text: #DBDEE1; --accent: #5865F2; --border: #3F4147; }
* { box-sizing: border-box; }
html, body, #root { height: 100%; }
body { margin: 0; background: var(--bg); color: var(--text); font-family: Inter, system-ui, Arial, sans-serif; }
a { color: var(--accent); }

/* Auth */
.auth-container { display:flex; align-items:center; justify-content:center; height:100%; padding:24px; }
.auth-card { width:100%; max-width:420px; background: var(--panel); border:1px solid var(--border); padding:24px; border-radius:12px; }
.brand { font-size:28px; margin-bottom:8px; }
.auth-form { display:flex; flex-direction:column; gap:12px; margin-top:12px; }
.auth-form label { display:flex; flex-direction:column; gap:6px; font-size:14px; color: var(--muted); }
.auth-form input { padding:10px 12px; border-radius:8px; border:1px solid var(--border); background:var(--panel); color:var(--text); }
.primary-btn { width:100%; margin-top:6px; background:var(--accent); color:white; border:0; padding:10px 12px; border-radius:8px; }
.error-text { color:#ef4444; font-size:14px; }
.muted { margin-top:10px; color: var(--muted); }

/* App Shell */
.app-shell { display:grid; grid-template-columns: 332px 1fr; height:100%; }
.server-sidebar { width:72px; min-width:72px; border-right:1px solid var(--border); background: var(--panel); display:flex; flex-direction:column; align-items:center; gap:10px; padding:10px 8px; height:100%; }
.server-sidebar > *:last-child { margin-top: auto; }
.server-item { position:relative; width:48px; height:48px; display:flex; align-items:center; justify-content:center; border-radius:50%; background: #313338; color:#fff; border:0; cursor:pointer; transition: border-radius .2s ease, transform .12s ease, background .2s ease; }
/* Light mode: change inactive server background */
:root:not([data-theme="dark"]) .server-item:not(.home):not(.active) { background: #e5e7eb; color: #111827; }
/* Dark mode: keep dark background unchanged */
[data-theme="dark"] .server-item:not(.home):not(.active) { background: #313338; color: #fff; }
.server-item.home { background: var(--accent); }
.server-item:hover { border-radius:16px; transform: translateZ(0) scale(1.02); }
.server-item.active { background: var(--accent); border-radius:16px; }
.server-avatar { width:100%; height:100%; border-radius:inherit; display:flex; align-items:center; justify-content:center; font-weight:700; letter-spacing:.5px; }
.server-separator { width:24px; height:2px; background: var(--border); border-radius:2px; margin:4px 0 2px; }
.server-tooltip { position:absolute; left:58px; background:#000; color:#fff; padding:6px 8px; border-radius:6px; font-size:12px; white-space:nowrap; opacity:0; transform: translateY(-50%); top:50%; pointer-events:none; transition: opacity .12s ease; }
.server-item:hover .server-tooltip { opacity:1; }
.sidebar { border-right:1px solid var(--border); background:var(--panel); display:flex; flex-direction:column; transition: transform .2s ease; }
.sidebar-row { display:grid; grid-template-columns: 72px 1fr; height:100%; min-height:0; }
.sidebar-content { display:flex; flex-direction:column; min-width:0; }
.sidebar-header { padding:16px; border-bottom:1px solid var(--border); }
.sidebar-header .brand { color: var(--text); }
.tabs { display:flex; gap:6px; padding:8px 12px; border-bottom:1px solid var(--border); }
.tab { background:transparent; border:0; color:var(--muted); padding:6px 10px; border-radius:6px; }
.tab.active { color:var(--text); background: rgba(88,101,242,0.12); }
.channel-list { padding:8px 8px 12px 8px; display:flex; flex-direction:column; gap:4px; }
.section { padding:8px 12px 4px; color: var(--muted); font-size:11px; letter-spacing:.6px; }
.section-title { font-weight:700; }
.channel-item { padding:8px 10px; border-radius:6px; color:var(--muted); transition: background-color .15s ease, color .15s ease; display:flex; align-items:center; gap:8px; }
.channel-hash { color: var(--muted); }
.channel-name { flex:1; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
.channel-item:hover { background: rgba(255,255,255,0.04); color: var(--text); }
.channel-item.active { color:var(--text); background: rgba(88,101,242,0.18); box-shadow: inset 3px 0 0 0 var(--accent); }

.chat { display:grid; grid-template-rows: auto 1fr auto; min-height:0; overflow:hidden; }
.chat-header { display:flex; gap:12px; align-items:center; padding:8px 16px; border-bottom:1px solid var(--border); }
.chat-title { font-weight:600; font-size:16px; color: var(--text); flex:1; }
.search { flex:1; padding:8px 10px; border-radius:8px; border:1px solid var(--border); background:var(--panel); color:var(--text); }
.menu { display:none; width:36px; height:36px; border-radius:8px; border:1px solid var(--border); background:var(--panel); color:var(--muted); }
.circle { width:32px; height:32px; border-radius:50%; border:1px solid var(--border); background:var(--panel); color:var(--muted); }
.chat-body { padding:16px 20px; display:flex; flex-direction:column; gap:10px; overflow-y:auto; }
.message { max-width:68%; display:flex; flex-direction:column; gap:4px; }
.message.right { align-self:flex-end; align-items:flex-end; }
.message.left { align-items:flex-start; }
.message-sender { font-size:12px; color: var(--muted); padding:0 4px; }
.message-bubble { padding:10px 12px; border-radius:10px; border:1px solid var(--border); background: rgba(255,255,255,0.03); }
.message.right .message-bubble { background: rgba(88,101,242,0.18); border-color: var(--accent); }
.chat-input { display:flex; gap:8px; padding:12px 16px; border-top:1px solid var(--border); }
.chat-input-wrapper { position:relative; display:flex; flex:1; gap:8px; align-items:center; }
.chat-input input { flex:1; padding:10px 12px; border-radius:8px; border:1px solid var(--border); background:var(--panel); color:var(--text); }
.emoji-button { background:transparent; border:0; font-size:20px; cursor:pointer; padding:8px; display:flex; align-items:center; justify-content:center; border-radius:8px; transition: background-color 0.15s ease; }
.emoji-button:hover { background:rgba(255,255,255,0.05); }
.emoji-picker-container { position:absolute; bottom:calc(100% + 8px); left:0; z-index:100; }
.send { background:var(--accent); color:white; border:0; padding:10px 16px; border-radius:8px; cursor:pointer; }
.send:hover { opacity:0.9; }

/* Ensure sidebar doesn't move when chat scrolls */
.app-shell { overflow:hidden; }
.sidebar { min-height:0; }
.channel-list { overflow:auto; }

/* Scrollbar styling */
.chat-body, .channel-list {
  scrollbar-width: thin; /* Firefox */
  scrollbar-color: var(--border) transparent; /* Firefox */
}

.chat-body::-webkit-scrollbar, .channel-list::-webkit-scrollbar {
  width: 10px;
}
.chat-body::-webkit-scrollbar-track, .channel-list::-webkit-scrollbar-track {
  background: transparent;
}
.chat-body::-webkit-scrollbar-thumb, .channel-list::-webkit-scrollbar-thumb {
  background-color: var(--border);
  border-radius: 8px;
  border: 2px solid transparent;
  background-clip: padding-box;
}
.chat-body::-webkit-scrollbar-thumb:hover, .channel-list::-webkit-scrollbar-thumb:hover {
  background-color: var(--accent);
  border-color: var(--panel);
}

/* Profile section */
.profile-section { display:flex; flex-direction:column; gap:10px; align-items:center; width:100%; margin-top:auto; }
.profile-button { width:48px; height:48px; }
.profile-anchor { position: relative; }
.profile-popover {
  position: absolute;
  left: calc(100% + 12px);
  bottom: 0;
  background: var(--panel);
  color: var(--text);
  border: 1px solid var(--border);
  border-radius: 10px;
  box-shadow: 0 10px 20px rgba(0,0,0,0.2);
  padding: 12px;
  width: 240px;
  z-index: 50;
}
.profile-row { display:flex; gap:10px; align-items:center; margin-bottom:10px; }
.profile-avatar { width:36px; height:36px; border-radius:50%; background: var(--accent); color:white; display:flex; align-items:center; justify-content:center; font-weight:600; }
.profile-meta { display:flex; flex-direction:column; }
.profile-name { font-weight:600; }
.profile-sub { color: var(--muted); font-size:12px; }
.profile-action { width:100%; background:var(--panel); color:var(--text); border:1px solid var(--border); padding:8px 10px; border-radius:8px; }
.profile-action:hover { border-color: var(--accent); }

/* Mobile */
@media (max-width: 900px) {
  .app-shell { grid-template-columns: 1fr; position:relative; }
  .menu { display:block; }
  /* Sidebar slides in (server rail inside it) */
  .sidebar { position:fixed; inset:0 auto 0 0; width:80vw; max-width:340px; transform: translateX(-100%); z-index:20; }
  .sidebar.open { transform: translateX(0); }
  .sidebar-row { grid-template-columns: 56px 1fr; }
  .sidebar .server-sidebar { width:56px; min-width:56px; gap:8px; padding:8px 6px; }
  .overlay { position:fixed; inset:0; background: rgba(0,0,0,.5); z-index:10; }
  .message { max-width:80%; }
  .emoji-picker-container { left:auto; right:0; }
}

/* Modal centering helpers (match classnames used in InputModal) */
.fixed { position: fixed; }
.relative { position: relative; }
.absolute { position: absolute; }
.inset-0 { top: 0; right: 0; bottom: 0; left: 0; }
.z-50 { z-index: 50; }
.z-10 { z-index: 10; }
.z-0 { z-index: 0; }
.flex { display: flex; }
.items-center { align-items: center; }
.justify-center { justify-content: center; }
/* Escape the slash in the class name */
.bg-black\/50 { background: rgba(0,0,0,0.5); }

/* Modal design */
.modal-overlay { position:fixed; inset:0; z-index:50; display:flex; align-items:center; justify-content:center; }
.modal-overlay::before { content:""; position:absolute; inset:0; background: rgba(0,0,0,0.5); }
.modal { position:relative; z-index:51; width:100%; max-width:440px; background: var(--panel); color: var(--text); border:1px solid var(--border); border-radius:12px; box-shadow: 0 10px 25px rgba(0,0,0,0.25); padding:20px; }
.modal-header { display:flex; align-items:flex-start; justify-content:space-between; gap:12px; margin-bottom:12px; }
.modal-title { font-size:18px; font-weight:600; margin:0; }
.modal-desc { margin-top:6px; font-size:14px; color: var(--muted); }
.modal-close { background:transparent; border:0; color: var(--muted); border-radius:8px; padding:6px; cursor:pointer; }
.modal-close:hover { background: rgba(0,0,0,0.06); }
.modal-form { display:flex; flex-direction:column; gap:12px; }
.modal-field { display:flex; flex-direction:column; gap:6px; }
.modal-label { font-size:13px; color: var(--muted); font-weight:600; }
.modal-input, .modal-textarea, .modal-select { width:100%; padding:10px 12px; border-radius:8px; border:1px solid var(--border); background: var(--panel); color: var(--text); font-size:14px; }
.modal-textarea { resize:vertical; }
.modal-input:focus, .modal-textarea:focus, .modal-select:focus { outline:none; border-color: var(--accent); box-shadow: 0 0 0 3px rgba(88,101,242,0.15); }
.modal-actions { display:flex; justify-content:flex-end; gap:8px; margin-top:8px; }
.btn { padding:10px 14px; border-radius:8px; border:1px solid var(--border); background: var(--panel); color: var(--text); cursor:pointer; font-size:14px; }
.btn:hover { border-color: var(--accent); }
.btn.primary { background: var(--accent); color:#fff; border-color: var(--accent); }
.btn.primary:hover { filter: brightness(0.95); }
.btn:disabled, .btn.primary:disabled { opacity:0.6; cursor:not-allowed; }
